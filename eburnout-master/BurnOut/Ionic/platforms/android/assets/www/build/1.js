webpackJsonp([1],{1031:function(n,l,t){"use strict";var e=t(7),u=t(1032);e.Observable.combineLatest=u.combineLatest},1032:function(n,l,t){"use strict";var e=t(166),u=t(155),o=t(156),a=t(1033);l.combineLatest=function(){for(var n=[],l=0;l<arguments.length;l++)n[l-0]=arguments[l];var t=null,i=null;return e.isScheduler(n[n.length-1])&&(i=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&u.isArray(n[0])&&(n=n[0]),new o.ArrayObservable(n,i).lift(new a.CombineLatestOperator(t))}},1033:function(n,l,t){"use strict";var e=t(4).__extends,u=t(156),o=t(155),a=t(56),i=t(55),r={};l.combineLatest=function(){for(var n=[],l=0;l<arguments.length;l++)n[l-0]=arguments[l];var t=null;return"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&o.isArray(n[0])&&(n=n[0].slice()),function(l){return l.lift.call(new u.ArrayObservable([l].concat(n)),new s(t))}};var s=function(){function n(n){this.project=n}return n.prototype.call=function(n,l){return l.subscribe(new c(n,this.project))},n}();l.CombineLatestOperator=s;var c=function(n){function l(l,t){n.call(this,l),this.project=t,this.active=0,this.values=[],this.observables=[]}return e(l,n),l.prototype._next=function(n){this.values.push(r),this.observables.push(n)},l.prototype._complete=function(){var n=this.observables,l=n.length;if(0===l)this.destination.complete();else{this.active=l,this.toRespond=l;for(var t=0;t<l;t++){var e=n[t];this.add(i.subscribeToResult(this,e,e,t))}}},l.prototype.notifyComplete=function(n){0==(this.active-=1)&&this.destination.complete()},l.prototype.notifyNext=function(n,l,t,e,u){var o=this.values,a=this.toRespond?o[t]===r?--this.toRespond:this.toRespond:0;o[t]=l,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},l.prototype._tryProject=function(n){var l;try{l=this.project.apply(this,n)}catch(n){return void this.destination.error(n)}this.destination.next(l)},l}(a.OuterSubscriber);l.CombineLatestSubscriber=c},403:function(n,l,t){"use strict";function e(n){return o._19(0,[(n()(),o.Z(0,0,null,null,37,"form",[["class","formulario"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,t){var e=!0,u=n.component;if("submit"===l){e=!1!==o._13(n,2).onSubmit(t)&&e}if("reset"===l){e=!1!==o._13(n,2).onReset()&&e}if("ngSubmit"===l){e=!1!==u.login()&&e}return e},null,null)),o.Y(1,16384,null,0,I.n,[],null,null),o.Y(2,4210688,null,0,I.j,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),o._15(2048,null,I.b,null,[I.j]),o.Y(4,16384,null,0,I.i,[I.b],null,null),(n()(),o._18(-1,null,["\n    "])),(n()(),o.Z(6,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,w.b,w.a)),o.Y(7,1097728,null,3,x.a,[T.a,S.a,o.j,o.z,[2,Y.a]],null,null),o._16(335544320,1,{contentLabel:0}),o._16(603979776,2,{_buttons:1}),o._16(603979776,3,{_icons:1}),o.Y(11,16384,null,0,E.a,[],null,null),(n()(),o._18(-1,2,["\n      "])),(n()(),o.Z(13,0,null,3,4,"ion-input",[["name","email"],["placeholder","Correo electrónico"],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.formulario.email=t)&&e}return e},j.b,j.a)),o.Y(14,671744,null,0,I.k,[[2,I.b],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o._15(2048,null,I.g,null,[I.k]),o.Y(16,16384,null,0,I.h,[I.g],null,null),o.Y(17,5423104,null,0,P.a,[S.a,R.a,T.a,A.a,o.j,o.z,[2,O.a],[2,x.a],[2,I.g],k.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),o._18(-1,2,["\n    "])),(n()(),o._18(-1,null,["\n    "])),(n()(),o.Z(20,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,w.b,w.a)),o.Y(21,1097728,null,3,x.a,[T.a,S.a,o.j,o.z,[2,Y.a]],null,null),o._16(335544320,4,{contentLabel:0}),o._16(603979776,5,{_buttons:1}),o._16(603979776,6,{_icons:1}),o.Y(25,16384,null,0,E.a,[],null,null),(n()(),o._18(-1,2,["\n      "])),(n()(),o.Z(27,0,null,3,4,"ion-input",[["name","password"],["placeholder","Contraseña"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.formulario.password=t)&&e}return e},j.b,j.a)),o.Y(28,671744,null,0,I.k,[[2,I.b],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o._15(2048,null,I.g,null,[I.k]),o.Y(30,16384,null,0,I.h,[I.g],null,null),o.Y(31,5423104,null,0,P.a,[S.a,R.a,T.a,A.a,o.j,o.z,[2,O.a],[2,x.a],[2,I.g],k.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),o._18(-1,2,["\n    "])),(n()(),o._18(-1,null,["\n    "])),(n()(),o.Z(34,0,null,null,2,"button",[["class","btn-1"],["ion-button",""],["type","submit"]],null,null,null,U.b,U.a)),o.Y(35,1097728,null,0,Z.a,[[8,""],S.a,o.j,o.z],null,null),(n()(),o._18(-1,0,["Entrar"])),(n()(),o._18(-1,null,["\n  "]))],function(n,l){var t=l.component;n(l,14,0,"email",t.formulario.email);n(l,17,0,"email","Correo electrónico");n(l,28,0,"password",t.formulario.password);n(l,31,0,"password","Contraseña")},function(n,l){n(l,0,0,o._13(l,4).ngClassUntouched,o._13(l,4).ngClassTouched,o._13(l,4).ngClassPristine,o._13(l,4).ngClassDirty,o._13(l,4).ngClassValid,o._13(l,4).ngClassInvalid,o._13(l,4).ngClassPending);n(l,13,0,o._13(l,16).ngClassUntouched,o._13(l,16).ngClassTouched,o._13(l,16).ngClassPristine,o._13(l,16).ngClassDirty,o._13(l,16).ngClassValid,o._13(l,16).ngClassInvalid,o._13(l,16).ngClassPending);n(l,27,0,o._13(l,30).ngClassUntouched,o._13(l,30).ngClassTouched,o._13(l,30).ngClassPristine,o._13(l,30).ngClassDirty,o._13(l,30).ngClassValid,o._13(l,30).ngClassInvalid,o._13(l,30).ngClassPending)})}function u(n){return o._19(0,[(n()(),o._18(-1,null,["\n"])),(n()(),o.Z(1,0,null,null,4,"ion-header",[],null,null,null,null,null)),o.Y(2,16384,null,0,L.a,[S.a,o.j,o.z,[2,F.a]],null,null),(n()(),o._18(-1,null,["\n  "])),(n()(),o.Z(4,0,null,null,0,"div",[],null,null,null,null,null)),(n()(),o._18(-1,null,["\n"])),(n()(),o._18(-1,null,["\n"])),(n()(),o._18(-1,null,["\n\n"])),(n()(),o._18(-1,null,["\n"])),(n()(),o.Z(9,0,null,null,7,"ion-content",[["class","contenedor"],["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,M.b,M.a)),o.Y(10,4374528,null,0,O.a,[S.a,R.a,k.a,o.j,o.z,A.a,D.a,o.u,[2,F.a],[2,q.a]],null,null),(n()(),o._18(-1,1,["\n  "])),(n()(),o.Z(12,0,null,1,0,"img",[["class","logo"],["src","assets/imgs/logo.svg"]],null,null,null,null,null)),(n()(),o._18(-1,1,["\n  "])),(n()(),o.U(16777216,null,1,1,null,e)),o.Y(15,16384,null,0,N.i,[o.I,o.F],{ngIf:[0,"ngIf"]},null),(n()(),o._18(-1,1,["\n"])),(n()(),o._18(-1,null,["\n"]))],function(n,l){n(l,15,0,!l.component._id)},function(n,l){n(l,9,0,o._13(l,10).statusbarPadding,o._13(l,10)._hasRefresher)})}Object.defineProperty(l,"__esModule",{value:!0});var o=t(0),a=(t(4),t(67),t(165)),i=t(97),r=t(151),s=t(7),c=(t(1031),t(105),t(101)),d=function(){function n(n,l,t,e,u,o,a,i){this.navCtrl=n,this.fireAuth=l,this.toastCtrl=t,this.global=e,this.database=u,this.loadingCtrl=o,this._storage=a,this._sqlite=i,this._db=null,this._id=0,this._semilla="MyBurnOut",this.formulario={email:"",password:""}}return n.prototype.ionViewDidLoad=function(){this._onInit()},n.prototype._cipher=function(n,l){for(var t=n,e="",u=0;u<t.length;u++){var o=t[u].charCodeAt(0),a=null;u%2==0?a="encrypt"==l?o+4:o-4:u%2==1&&(a="encrypt"==l?o+7:o-7);e+=String.fromCharCode(a)}return e},n.prototype._onInit=function(){var n=this;this._createDatabase().then(function(l){if(void 0!==l[0]){n._id=l[0].id,n.formulario.email=l[0].email;var t=n._cipher(l[0].pwd,"");return n.formulario.password=t,n.login()}},function(l){n.toast(JSON.stringify(l))})},n.prototype._createDatabase=function(){var n=this;return this._sqlite.create({name:"eburnout.db",location:"default"}).then(function(l){return n._setDatabase(l),n._createTable(),n._getUser()}).catch(function(l){console.error(l),n.toast(JSON.stringify(l)),Promise.reject(l)})},n.prototype._setDatabase=function(n){null===this._db&&(this._db=n)},n.prototype._update=function(n,l,t){return this._db.executeSql("UPDATE usuario SET email=?, pwd=? WHERE id=?",[n,l,t])},n.prototype._create=function(n,l){return this._db.executeSql("INSERT INTO usuario(email,pwd) VALUES(?,?)",[n,l])},n.prototype._deleteTable=function(){return this._db.executeSql("DROP TABLE IF EXISTS usuario",[])},n.prototype._createTable=function(){return this._db.executeSql("CREATE TABLE IF NOT EXISTS usuario(id INTEGER PRIMARY KEY AUTOINCREMENT, email VARCHAR(100),pwd TEXT)",[])},n.prototype._getUser=function(){return this._db.executeSql("SELECT * FROM usuario WHERE id=1",[]).then(function(n){for(var l=[],t=0;t<n.rows.length;t++)l.push(n.rows.item(t));return Promise.resolve(l)}).catch(function(n){return Promise.reject(n)})},n.prototype.login=function(){var n=this;this.loading=this.loadingCtrl.create({content:"Cargando"}),this.loading.present().then(function(){n.fireAuth.auth.signInWithEmailAndPassword(n.formulario.email,n.formulario.password).then(function(l){n.observable=s.Observable.combineLatest(n.database.preguntas(),n.database.recomendaciones(),n.database.usuarioRegistradoBD(l.uid),n.database.encuestasUltimas(l.uid),n.database.idClientFitBit(l.uid)).subscribe(function(t){if(console.log(t),n.global.questions=t[0],n.global.recommendations=t[1],null==t[2])n.navCtrl.setRoot("RegistroPage",{idUsuario:l.uid,email:n.formulario.email,password:n.formulario.password}),n.loading.dismiss();else{var e=n._cipher(n.formulario.password,"encrypt");n._id?n._update(n.formulario.email,e,n._id):n._create(n.formulario.email,e),n.global.usuario=t[2],n.global.resultadoPreguntas=n.global.usuario.ultimaencuesta;for(var u=0,o=t[3];u<o.length;u++){n.global.resultadosPreguntas.push(o[u].encuesta)}for(var a=0,i=t[4];a<i.length;a++){var r=i[a];n.global.client_id=r.client_id,n.global.client_secret=r.client_secret}n.navCtrl.setRoot("TabGeneralPage"),n.loading.dismiss()}})}).catch(function(l){var t="";t="auth/user-not-found"==l.code||"auth/invalid-email"==l.code?"Usuario no válido":"Contraseña no válida",n.loading.dismiss(),n.toast(t)})})},n.prototype.toast=function(n){this.toastCtrl.create({message:n,duration:2500,position:"bottom",dismissOnPageChange:!0}).present()},n.prototype.ionViewWillUnload=function(){this.observable.unsubscribe()},n}(),p=function(){return function(){}}(),f=t(274),_=t(275),g=t(276),h=t(277),b=t(278),m=t(279),v=t(280),y=t(281),C=t(282),I=t(21),w=t(283),x=t(22),T=t(18),S=t(2),Y=t(53),E=t(98),j=t(503),P=t(154),R=t(5),A=t(11),O=t(28),k=t(12),U=t(51),Z=t(26),L=t(153),F=t(6),M=t(428),D=t(44),q=t(27),N=t(17),z=t(100),V=t(102),B=t(169),X=o.X({encapsulation:2,styles:[],data:{}}),W=o.V("page-login",d,function(n){return o._19(0,[(n()(),o.Z(0,0,null,null,1,"page-login",[],null,null,null,u,X)),o.Y(1,49152,null,0,d,[q.a,a.a,z.a,i.a,r.a,V.a,B.a,c.a],null,null)],null,null)},{},{},[]),H=t(152),J=t(45);t.d(l,"LoginPageModuleNgFactory",function(){return K});var K=o.W(p,[],function(n){return o._10([o._11(512,o.i,o.S,[[8,[f.a,_.a,g.a,h.a,b.a,m.a,v.a,y.a,C.a,W]],[3,o.i],o.s]),o._11(4608,N.k,N.j,[o.r,[2,N.s]]),o._11(4608,I.o,I.o,[]),o._11(4608,I.d,I.d,[]),o._11(512,N.b,N.b,[]),o._11(512,I.m,I.m,[]),o._11(512,I.e,I.e,[]),o._11(512,I.l,I.l,[]),o._11(512,H.a,H.a,[]),o._11(512,H.b,H.b,[]),o._11(512,p,p,[]),o._11(256,J.a,d,[])])})},428:function(n,l,t){"use strict";function e(n){return u._19(2,[u._16(402653184,1,{_fixedContent:0}),u._16(402653184,2,{_scrollContent:0}),(n()(),u.Z(2,0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),u._12(null,0),(n()(),u.Z(4,0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),u._12(null,1),u._12(null,2)],null,null)}t.d(l,"a",function(){return o}),l.b=e;var u=t(0),o=(t(28),t(2),t(5),t(12),t(44),t(6),t(27),u.X({encapsulation:2,styles:[],data:{}}))},503:function(n,l,t){"use strict";function e(n){return r._19(0,[(n()(),r.Z(0,0,[[1,0],["textInput",1]],null,1,"input",[["class","text-input"],["dir","auto"]],[[8,"type",0],[1,"aria-labelledby",0],[1,"min",0],[1,"max",0],[1,"step",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(n,l,t){var e=!0,u=n.component;if("input"===l){e=!1!==u.onInput(t)&&e}if("blur"===l){e=!1!==u.onBlur(t)&&e}if("focus"===l){e=!1!==u.onFocus(t)&&e}if("keydown"===l){e=!1!==u.onKeydown(t)&&e}return e},null,null)),r.Y(1,278528,null,0,s.g,[r.p,r.q,r.j,r.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,l){n(l,1,0,"text-input","text-input-"+l.component._mode)},function(n,l){var t=l.component;n(l,0,0,t._type,t._labelId,t.min,t.max,t.step,t.autocomplete,t.autocorrect,t.placeholder,t._disabled,t._readonly)})}function u(n){return r._19(0,[(n()(),r.Z(0,0,[[1,0],["textInput",1]],null,1,"textarea",[["class","text-input"]],[[1,"aria-labelledby",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(n,l,t){var e=!0,u=n.component;if("input"===l){e=!1!==u.onInput(t)&&e}if("blur"===l){e=!1!==u.onBlur(t)&&e}if("focus"===l){e=!1!==u.onFocus(t)&&e}if("keydown"===l){e=!1!==u.onKeydown(t)&&e}return e},null,null)),r.Y(1,278528,null,0,s.g,[r.p,r.q,r.j,r.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,l){n(l,1,0,"text-input","text-input-"+l.component._mode)},function(n,l){var t=l.component;n(l,0,0,t._labelId,t.autocomplete,t.autocorrect,t.placeholder,t._disabled,t._readonly)})}function o(n){return r._19(0,[(n()(),r.Z(0,0,null,null,1,"button",[["class","text-input-clear-icon"],["clear",""],["ion-button",""],["tabindex","-1"],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(n,l,t){var e=!0,u=n.component;if("click"===l){e=!1!==u.clearTextInput(t)&&e}if("mousedown"===l){e=!1!==u.clearTextInput(t)&&e}return e},c.b,c.a)),r.Y(1,1097728,null,0,d.a,[[8,""],p.a,r.j,r.z],{clear:[0,"clear"]},null)],function(n,l){n(l,1,0,"")},null)}function a(n){return r._19(0,[(n()(),r.Z(0,0,null,null,0,"div",[["class","input-cover"]],null,[[null,"touchstart"],[null,"touchend"],[null,"mousedown"],[null,"mouseup"]],function(n,l,t){var e=!0,u=n.component;if("touchstart"===l){e=!1!==u._pointerStart(t)&&e}if("touchend"===l){e=!1!==u._pointerEnd(t)&&e}if("mousedown"===l){e=!1!==u._pointerStart(t)&&e}if("mouseup"===l){e=!1!==u._pointerEnd(t)&&e}return e},null,null))],null,null)}function i(n){return r._19(2,[r._16(671088640,1,{_native:0}),(n()(),r.U(16777216,null,null,1,null,e)),r.Y(2,16384,null,0,s.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r.U(16777216,null,null,1,null,u)),r.Y(4,16384,null,0,s.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r.U(16777216,null,null,1,null,o)),r.Y(6,16384,null,0,s.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r.U(16777216,null,null,1,null,a)),r.Y(8,16384,null,0,s.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,2,0,!t._isTextarea);n(l,4,0,t._isTextarea);n(l,6,0,t._clearInput);n(l,8,0,t._useAssist)},null)}t.d(l,"a",function(){return f}),l.b=i;var r=t(0),s=t(17),c=t(51),d=t(26),p=t(2),f=(t(154),t(5),t(18),t(22),t(12),r.X({encapsulation:2,styles:[],data:{}}))}});
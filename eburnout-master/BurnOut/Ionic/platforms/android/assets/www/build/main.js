webpackJsonp([7],{151:function(t,e,a){"use strict";a.d(e,"a",function(){return n});a(4);var n=function(){function t(t,e){this.http=t,this.db=e}return t.prototype.preguntas=function(){return this.db.list("/questions").valueChanges()},t.prototype.recomendaciones=function(){return this.db.list("/recommendations").valueChanges()},t.prototype.especialidades=function(){return this.db.list("/especialidades").valueChanges()},t.prototype.registroUsuarioBD=function(t){this.db.database.ref("/usuarios/"+t.id).set(t)},t.prototype.usuarioRegistradoBD=function(t){return this.db.object("/usuarios/"+t).valueChanges()},t.prototype.guardarUltimaEncuesta=function(t,e){this.db.database.ref("/usuarios/"+t+"/ultimaencuesta").set(e)},t.prototype.guardarEncuesta=function(t,e){this.db.database.ref("/encuestas").push({id:t,encuesta:e})},t.prototype.encuestasUltimas=function(t){return this.db.list("/encuestas/",function(e){return e.orderByChild("id").equalTo(t).limitToLast(3)}).valueChanges()},t.prototype.guardarEstadoAnimo=function(t,e){this.db.database.ref("/estadosanimo").push({id:t,estado:e})},t.prototype.consultaFoto=function(t){return this.http.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyB_mk7PfJCwuHBCw51P4juWqxBJdwVEG5o",{requests:[{image:{content:t},features:[{type:"FACE_DETECTION"}]}]})},t.prototype.idClientFitBit=function(t){return this.db.list("/fbclient/",function(e){return e.orderByChild("id").equalTo(t)}).valueChanges()},t}()},164:function(t,e,a){"use strict";a(4);var n=a(149),i=(a(0),a(89),a(393),a(7)),o={url:"https://www.fitbit.com/oauth2/authorize",rate_limit:150,key_access_token:"access_token",body:{redirect_uri:"https://localhost:8100/eburnout_callback",client_id:"",scope:"activity nutrition heartrate location nutrition profile settings sleep social weight",response_type:"token",expires_in:"600"}},r=(a(67),function(){return function(t,e,a,n){this.timeinbed=t,this.starttime=e,this.endtime=a,this.minutesawake=n}}());a(97),a(105),a(101);a.d(e,"a",function(){return s});var s=function(){function t(t,e,a,n,o,s){var c=this;this.http=t,this.platform=e,this.alertCtrl=a,this._global=n,this._storage=o,this._sqlite=s,this._renew_token=!1,this._access_token="",this._client_id="",this._client_secret="",this._iCron=null,this._timeCron=5e3,this._tsAHI=[],this._stayWaiting=!1,this._db=null,this._id=0,this._db_client_id="",this._fbsleep=new r(0,"","",0),this.errorObserver=null,this.error=i.Observable.create(function(t){c.errorObserver=t}),this._set_time_cron(),this._oninit()}return t.prototype._oninit=function(){var t=this;this._createDatabase().then(function(e){var a="";void 0!==e[0]&&(t._id=e[0].id,t._db_client_id=e[0].client_id,a=t._db_client_id==t._global.client_id?e[0].token:""),t._client_id=t._db_client_id,t._storage.set("fb_client_id",t._db_client_id),t._access_token=a,t._storage.set("fb_access_token",a),t._load_vars(),t._valuate_error({error:"",status:1020})},function(e){t.showAlert(JSON.stringify(e))})},t.prototype._createDatabase=function(){var t=this;return this._sqlite.create({name:"eburnout.db",location:"default"}).then(function(e){return t._setDatabase(e),t._createTable(),t._getClient()}).catch(function(e){console.error(e),t.showAlert(JSON.stringify(e)),Promise.reject(e)})},t.prototype._setDatabase=function(t){null===this._db&&(this._db=t)},t.prototype._create=function(t){return this._db.executeSql("INSERT INTO client(token,client_id) VALUES(?,?)",[t,this._client_id])},t.prototype._deleteTable=function(){return this._db.executeSql("DROP TABLE IF EXISTS client",[])},t.prototype._createTable=function(){return this._db.executeSql("CREATE TABLE IF NOT EXISTS client(id INTEGER PRIMARY KEY AUTOINCREMENT, token TEXT,client_id VARCHAR(6))",[])},t.prototype._delete=function(t){return this._db.executeSql("DELETE FROM client WHERE id=?",[t])},t.prototype._getClient=function(){return this._db.executeSql("SELECT * FROM client WHERE id=1",[]).then(function(t){for(var e=[],a=0;a<t.rows.length;a++)e.push(t.rows.item(a));return Promise.resolve(e)}).catch(function(t){return Promise.reject(t)})},t.prototype._update=function(t,e){return this._db.executeSql("UPDATE client SET token=?, client_id=? WHERE id=?",[t,this._client_id,e])},t.prototype._set_time_cron=function(){this._timeCron=(o.rate_limit<=0?150:o.rate_limit)/60*60*1e3},t.prototype._load_vars=function(){var t=this;this._global.client_id&&(t._storage.get("fb_client_id").then(function(e){t._client_id=e||""}),t._storage.get("fb_access_token").then(function(e){t._access_token=e||""}),t._storage.get("fb_client_secret").then(function(e){t._client_secret=e||""}))},t.prototype._get_url=function(){return o.body.client_id=this._global.client_id,o.url+"?"+Object.keys(o.body).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(o.body[t])}).join("&")},t.prototype.get_strDate=function(t,e){void 0===t&&(t=""),void 0===e&&(e="");var a,n=(a=t.length?new Date(t):new Date).getDate()<10?"0"+a.getDate().toString():a.getDate().toString(),i=a.getMinutes()<10?"0"+a.getMinutes().toString():a.getMinutes().toString(),o=a.getMonth()+1<10?"0"+(a.getMonth()+1).toString():(a.getMonth()+1).toString();return"HH:mm:ss"==e?a.getHours().toString()+":"+i+":"+a.getSeconds().toString():"dd-mm-yyyy"==e?n+"-"+o+"-"+a.getFullYear().toString():a.getFullYear().toString()+"-"+o+"-"+n},t.prototype._getAuthPermission=function(){var t=this;return new Promise(function(e,a){t._renew_token=t._db_client_id!=t._global.client_id;var n=t._renew_token?",clearsessioncache=yes,clearcache=yes":"";if(void 0!=window.cordova){var i=window.cordova.InAppBrowser.open(t._get_url(),"_blank","location=no"+n);i.addEventListener("loadstart",function(t){if(0===t.url.indexOf(o.body.redirect_uri)){i.removeEventListener("exit",function(){}),i.close();var n=t.url.split(o.key_access_token)[1].split("&")[0].split("=")[1],r={},s={error:"Problem authenticating with FitBit",status:1010};void 0!==n&&null!==n?(r[o.key_access_token]=n,e(r)):a(s)}}),i.addEventListener("exit",function(t){a({error:"The FitBit authorization in flow was canceled",status:1010})})}else window.open(t._get_url(),"_blank","location=no"+n),e({access_token:"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiI2MjVLOTkiLCJhdWQiOiIyMkNHODQiLCJpc3MiOiJGaXRiaXQiLCJ0eXAiOiJhY2Nlc3NfdG9rZW4iLCJzY29wZXMiOiJyc29jIHJzZXQgcmFjdCBybG9jIHJ3ZWkgcmhyIHJwcm8gcm51dCByc2xlIiwiZXhwIjoxNTE1MDc4MTQzLCJpYXQiOjE1MTQ5OTg2ODB9.j6YhSfy7123wFYVsF0b9PNKm8sVihjplrUV_r6kBXuE"})})},t.prototype._toAutorizate=function(){var t=this,e=this;this._getAuthPermission().then(function(a){void 0!==a[o.key_access_token]&&(e._access_token=a[o.key_access_token],e._renew_token=!1,e._client_id=e._global.client_id,e._id?e._update(e._access_token,e._id):e._create(e._access_token),e._client_secret=e._global.client_secret,e._storage.set("fb_client_id",e._client_id),e._storage.set("fb_client_secret",e._client_secret),t._global.access_token=e._access_token,e._storage.set("fb_access_token",e._access_token),console.log("le pidio"),e._valuate_error({status:1001}))},function(t){e.showAlert(JSON.stringify(t)),e._valuate_error(t)})},t.prototype.check_auth=function(){var t=this;this.platform.ready().then(function(){t._load_vars(),!t._access_token.trim().length&&t.have_bracelet()?t._toAutorizate():(console.log("le tiene"),t._valuate_error({status:1001}))})},t.prototype._valuate_error=function(t){console.log("error"),console.log(t),this.errorObserver.next(t),void 0!=t.status&&(400==t.status||401==t.status?(this.toStopCron(),this._global.access_token="",this._storage.set("fb_access_token",""),this._load_vars(),this._toAutorizate()):429==t.status?this._stayWaiting=!0:1002==t.status&&(this._stayWaiting=!1))},t.prototype.toStopCron=function(){this._iCron&&clearInterval(this._iCron),this._iCron=null},t.prototype.toStartCron=function(){this._iCron&&this.toStopCron();var t=this;t._toCron(),this._iCron=setInterval(function(){t._toCron()},t._timeCron)},t.prototype._toCron=function(){this._get_heart()},t.prototype._get_authHeader=function(){return{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this._access_token}},t.prototype._get_userData=function(){var t=new n.g(this._get_authHeader());return this.http.get("https://api.fitbit.com/1/user/-/profile.json",{headers:t}).map(function(t){return t})},t.prototype._get_heart=function(){var t=new n.g(this._get_authHeader()),e=this;this.http.get("https://api.fitbit.com/1/user/-/activities/heart/date/today/1d/1sec/time/00:00/23:59.json",{headers:t}).subscribe(function(t){e._stayWaiting&&e._valuate_error({status:1002}),void 0!==t["activities-heart-intraday"]&&(e._tsAHI=t["activities-heart-intraday"].dataset.map(function(t){return{name:t.time,value:t.value}}),console.log(e._tsAHI)),e._get_sleep()},function(t){e._valuate_error(t)})},t.prototype._get_sleep=function(){var t=new n.g(this._get_authHeader()),e=this,a=this.get_strDate();this.http.get("https://api.fitbit.com/1.2/user/-/sleep/date/"+a+"/"+a+".json",{headers:t}).subscribe(function(t){if(e._stayWaiting&&e._valuate_error({status:1002}),console.log(t),void 0!==t.sleep)if(void 0!==t.sleep[0]){var a=t.sleep.length-1;e._fbsleep.starttime=t.sleep[a].startTime,e._fbsleep.endtime=t.sleep[a].endTime,e._fbsleep.timeinbed=0,e._fbsleep.minutesawake=0;for(var n=a;n>=0;n--)e._fbsleep.timeinbed+=t.sleep[n].timeInBed,e._fbsleep.minutesawake+=t.sleep[n].minutesAwake}else e._fbsleep.timeinbed=t.sleep.timeInBed,e._fbsleep.starttime=t.sleep.startTime,e._fbsleep.endtime=t.sleep.endTime,e._fbsleep.minutesawake=t.sleep.minutesAwake},function(t){e._valuate_error(t)})},t.prototype.sleep=function(){return this._fbsleep},t.prototype.tsAHI=function(){return this._tsAHI},t.prototype.showAlert=function(t){this.alertCtrl.create({title:"FitBit",subTitle:t,buttons:["OK"]}).present()},t.prototype.have_bracelet=function(){return""!=this._global.client_id&&null!=this._global.client_id&&void 0!=this._global.client_id},t}()},178:function(t,e){function a(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=178},208:function(t,e,a){function n(t){var e=i[t];return e?a.e(e[1]).then(function(){return a(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var i={"../pages/camara/camara.module.ngfactory":[401,5],"../pages/dashboard/dashboard.module.ngfactory":[402,0],"../pages/encuesta/encuesta.module.ngfactory":[404,2],"../pages/login/login.module.ngfactory":[403,1],"../pages/recomendacion/recomendacion.module.ngfactory":[405,4],"../pages/registro/registro.module.ngfactory":[406,3],"../pages/tab-general/tab-general.module.ngfactory":[407,6]};n.keys=function(){return Object.keys(i)},n.id=208,t.exports=n},284:function(t,e,a){"use strict";function n(t){return o._19(0,[(t()(),o.Z(0,0,null,null,2,"ion-nav",[],null,null,null,H.b,H.a)),o._15(6144,null,M.a,null,[F.a]),o.Y(2,4374528,null,0,F.a,[[2,D.a],[2,B.a],N.a,R.a,J.a,o.j,o.u,o.z,o.i,q.l,L.a,[2,x.a],X.a,o.k],{root:[0,"root"]},null),(t()(),o._18(-1,null,["\n"]))],function(t,e){t(e,2,0,e.component.rootPage)},null)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(32),o=a(0),r=(a(4),a(67),a(95)),s=a(96),c=function(){return function(t,e,a){this.rootPage="LoginPage",t.ready().then(function(){e.styleDefault(),a.hide()})}}(),_=a(160),l=a(131),u=a(149),d=a(43),h=a(122),p=a(165),g=a(97),f=a(151),b=a(164),m=a(273),y=a(105),v=a(101),k=function(){return function(){}}(),w=a(58),C=a(274),E=a(275),T=a(276),S=a(277),P=a(278),I=a(279),A=a(280),O=a(281),j=a(282),H=a(400),M=a(38),F=a(62),D=a(6),B=a(27),N=a(11),R=a(2),J=a(5),q=a(10),L=a(31),x=a(16),X=a(12),z=o.X({encapsulation:2,styles:[],data:{}}),U=o.V("ng-component",c,function(t){return o._19(0,[(t()(),o.Z(0,0,null,null,1,"ng-component",[],null,null,null,n,z)),o.Y(1,49152,null,0,c,[J.a,s.a,r.a],null,null)],null,null)},{},{},[]),W=a(17),Y=a(133),G=a(21),V=a(113),Z=a(115),Q=a(132),K=a(18),$=a(37),tt=a(44),et=a(102),at=a(152),nt=a(60),it=a(45),ot=a(137),rt=a(74),st=a(140),ct=a(135),_t=a(100),lt=a(169),ut=a(272),dt=a(134),ht=a(34),pt=a(121),gt=a(136),ft=o.W(k,[w.b],function(t){return o._10([o._11(512,o.i,o.S,[[8,[C.a,E.a,T.a,S.a,P.a,I.a,A.a,O.a,j.a,U]],[3,o.i],o.s]),o._11(5120,o.r,o._9,[[3,o.r]]),o._11(4608,W.k,W.j,[o.r,[2,W.s]]),o._11(5120,o.b,o._0,[]),o._11(5120,o.p,o._6,[]),o._11(5120,o.q,o._7,[]),o._11(4608,i.c,i.q,[W.c]),o._11(6144,o.D,null,[i.c]),o._11(4608,i.f,Y.a,[]),o._11(5120,i.d,function(t,e,a,n,o){return[new i.k(t,e),new i.o(a),new i.n(n,o)]},[W.c,o.u,W.c,W.c,i.f]),o._11(4608,i.e,i.e,[i.d,o.u]),o._11(135680,i.m,i.m,[W.c]),o._11(4608,i.l,i.l,[i.e,i.m]),o._11(6144,o.B,null,[i.l]),o._11(6144,i.p,null,[i.m]),o._11(4608,o.G,o.G,[o.u]),o._11(4608,i.h,i.h,[W.c]),o._11(4608,i.i,i.i,[W.c]),o._11(4608,G.o,G.o,[]),o._11(4608,G.d,G.d,[]),o._11(4608,l.c,l.c,[]),o._11(4608,l.g,l.b,[]),o._11(5120,l.i,l.j,[]),o._11(4608,l.h,l.h,[l.c,l.g,l.i]),o._11(4608,l.f,l.a,[]),o._11(5120,l.d,l.k,[l.h,l.f]),o._11(4608,u.i,u.n,[W.c,o.w,u.l]),o._11(4608,u.o,u.o,[u.i,u.m]),o._11(5120,u.a,function(t){return[t]},[u.o]),o._11(4608,u.k,u.k,[]),o._11(6144,u.j,null,[u.k]),o._11(4608,u.h,u.h,[u.j]),o._11(6144,u.b,null,[u.h]),o._11(5120,u.f,u.p,[u.b,[2,u.a]]),o._11(4608,u.c,u.c,[u.f]),o._11(4608,m.b,m.b,[]),o._11(5120,d.b,d.f,[d.c,d.d]),o._11(5120,h.a,h.c,[d.b]),o._11(5120,p.a,p.c,[d.b]),o._11(4608,V.a,V.a,[N.a,R.a]),o._11(4608,Z.a,Z.a,[N.a,R.a]),o._11(4608,Q.a,Q.a,[]),o._11(4608,K.a,K.a,[]),o._11(4608,$.a,$.a,[J.a]),o._11(4608,tt.a,tt.a,[R.a,J.a,o.u,X.a]),o._11(4608,et.a,et.a,[N.a,R.a]),o._11(5120,W.f,at.c,[W.q,[2,W.a],R.a]),o._11(4608,W.e,W.e,[W.f]),o._11(5120,nt.b,nt.d,[N.a,nt.a]),o._11(5120,x.a,x.b,[N.a,nt.b,W.e,it.b,o.i]),o._11(4608,ot.a,ot.a,[N.a,R.a,x.a]),o._11(4608,rt.a,rt.a,[N.a,R.a]),o._11(4608,st.a,st.a,[N.a,R.a,x.a]),o._11(4608,ct.a,ct.a,[R.a,J.a,X.a,N.a,q.l]),o._11(4608,_t.a,_t.a,[N.a,R.a]),o._11(4608,L.a,L.a,[J.a,R.a]),o._11(5120,lt.a,lt.c,[lt.b]),o._11(4608,s.a,s.a,[]),o._11(4608,r.a,r.a,[]),o._11(4608,_.a,_.a,[]),o._11(4608,g.a,g.a,[]),o._11(4608,f.a,f.a,[l.d,h.a]),o._11(4608,v.a,v.a,[]),o._11(4608,b.a,b.a,[u.c,J.a,Z.a,g.a,lt.a,v.a]),o._11(512,W.b,W.b,[]),o._11(512,o.k,ut.a,[]),o._11(256,R.b,{mode:"md",tabsHideOnSubPages:!0,scrollPadding:!1,scrollAssist:!0,autoFocusAssist:!1,preloadModules:!0},[]),o._11(1024,dt.a,dt.b,[]),o._11(1024,J.a,J.b,[i.b,dt.a,o.u]),o._11(1024,R.a,R.c,[R.b,J.a]),o._11(512,X.a,X.a,[J.a]),o._11(512,ht.a,ht.a,[]),o._11(512,N.a,N.a,[R.a,J.a,[2,ht.a]]),o._11(512,q.l,q.l,[N.a]),o._11(256,nt.a,{links:[{loadChildren:"../pages/camara/camara.module.ngfactory#CamaraPageModuleNgFactory",name:"CamaraPage",segment:"camara",priority:"low",defaultHistory:[]},{loadChildren:"../pages/dashboard/dashboard.module.ngfactory#DashboardPageModuleNgFactory",name:"DashboardPage",segment:"dashboard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/login.module.ngfactory#LoginPageModuleNgFactory",name:"LoginPage",segment:"login",priority:"low",defaultHistory:[]},{loadChildren:"../pages/encuesta/encuesta.module.ngfactory#EncuestaPageModuleNgFactory",name:"EncuestaPage",segment:"encuesta",priority:"low",defaultHistory:[]},{loadChildren:"../pages/recomendacion/recomendacion.module.ngfactory#RecomendacionPageModuleNgFactory",name:"RecomendacionPage",segment:"recomendacion",priority:"low",defaultHistory:[]},{loadChildren:"../pages/registro/registro.module.ngfactory#RegistroPageModuleNgFactory",name:"RegistroPage",segment:"registro",priority:"low",defaultHistory:[]},{loadChildren:"../pages/tab-general/tab-general.module.ngfactory#TabGeneralPageModuleNgFactory",name:"TabGeneralPage",segment:"tab-general",priority:"low",defaultHistory:[]}]},[]),o._11(512,o.h,o.h,[]),o._11(512,pt.a,pt.a,[o.h]),o._11(1024,it.b,it.c,[pt.a,o.o]),o._11(1024,o.c,function(t,e,a,n,o,r,s,c,_,l,u,d,h){return[i.s(t),gt.a(e),Q.b(a,n),ct.b(o,r,s,c,_),it.d(l,u,d,h)]},[[2,o.t],R.a,J.a,X.a,R.a,J.a,X.a,N.a,q.l,R.a,nt.a,it.b,o.u]),o._11(512,o.d,o.d,[[2,o.c]]),o._11(131584,o.f,o.f,[o.u,o.T,o.o,o.k,o.i,o.d]),o._11(512,o.e,o.e,[o.f]),o._11(512,i.a,i.a,[[3,i.a]]),o._11(512,G.m,G.m,[]),o._11(512,G.e,G.e,[]),o._11(512,G.l,G.l,[]),o._11(512,at.a,at.a,[]),o._11(512,l.e,l.e,[]),o._11(512,u.e,u.e,[]),o._11(512,u.d,u.d,[]),o._11(512,m.a,m.a,[]),o._11(512,d.a,d.a,[]),o._11(512,h.b,h.b,[]),o._11(512,p.b,p.b,[]),o._11(512,y.a,y.a,[]),o._11(512,k,k,[]),o._11(256,u.l,"XSRF-TOKEN",[]),o._11(256,u.m,"X-XSRF-TOKEN",[]),o._11(256,d.c,{apiKey:"AIzaSyA0mnZssyqo5PieFUUBTipdU9VB9uh0Xvo",authDomain:"my-first-project-7d187.firebaseapp.com",databaseURL:"https://my-first-project-7d187.firebaseio.com",projectId:"my-first-project-7d187",storageBucket:"my-first-project-7d187.appspot.com",messagingSenderId:"323245343363"},[]),o._11(256,d.d,void 0,[]),o._11(256,w.a,c,[]),o._11(256,W.a,"/",[]),o._11(256,lt.b,null,[])])});Object(o.M)(),Object(i.j)().bootstrapModuleFactory(ft)},97:function(t,e,a){"use strict";a.d(e,"a",function(){return n});a(4);var n=function(){return function(){this.questions=[],this.recommendations=[],this.usuario=[],this.resultadosPreguntas=[],this.client_id="",this.client_secret="",this.access_token="",this.resultadoPreguntas={ae:0,d:0,rp:0,q:""}}}()}},[284]);